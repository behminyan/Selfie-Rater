webpackJsonp([2],{DG0N:function(){},Jlkg:function(a,b,c){(function(a){var b=a(".snap-wrapper"),c=a(".snap"),d=a(".flash"),e=a(".canvas")[0],f=a(".hidden-canvas")[0],g=a(".download"),h=a("#myVideo")[0],i=a(".redo"),j=a(".download"),k=a("#ratingNum"),l=e.getContext("2d"),m=f.getContext("2d"),n=function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0];console.log(h.width,h.height,e.width,e.height);var b=110,c=l,d=e;return a&&(c=m,d=f),c.drawImage(h,b,0,d.width+b-20,d.height+80,0,0,d.width,d.height),d.toDataURL("image/png")},o=function(){d.addClass("click"),setTimeout(function(){d.removeClass("click")},200),k.addClass("freeze"),c.addClass("inactive"),i.addClass("active"),j.addClass("active"),g.attr("href",n())},p=0,q="",r=0,s=function a(){r=setTimeout(function(){var b=parseFloat(k.text());console.log(b,p),b>=p&&(p=b,q=n(!0)),a()},100)},t=0,u=!1;c.mousedown(function(){t=setTimeout(function(){f.style.display="block",b.addClass("pressed"),u=!0,s()},500)}).mouseup(function(){if(f.style.display="none",b.removeClass("pressed"),!u)clearTimeout(t),o();else{clearTimeout(r),k.text(p),console.log(p);var a=new Image;a.onload=function(){return l.drawImage(a,0,0)},a.src=q,k.addClass("freeze"),c.addClass("inactive"),i.addClass("active"),j.addClass("active"),g.attr("href",q)}u=!1}),i.on("click",function(){l.clearRect(0,0,e.width,e.height),k.removeClass("freeze"),c.removeClass("inactive"),i.removeClass("active"),j.removeClass("active")})}).call(b,c("7t+N"))},vGYV:function(a,b,c){(function(a,b){function d(a,b){var c=Math.round,d=[c(244-179*a),c(65+179*a),60];e.css("border","3px solid rgb("+d[0]+", "+d[1]+", "+d[2]+")"),b||e.removeClass("pulse")}c("DG0N"),c("Jlkg"),c("OWGu");var e=a(".camera");b.ObjectTracker.prototype.track=function(a,c,d){var e=this,f=this.getClassifiers();if(!f)throw new Error("Object classifier not specified, try `new tracking.ObjectTracker(\"face\")`.");var g=[];f.forEach(function(f){g=g.concat(b.ViolaJones.detect(a,c,d,e.getInitialScale(),e.getScaleFactor(),e.getStepSize(),e.getEdgesDensity(),f))}),this.emit("track",{data:g,pixels:a,width:c,height:d})};var f=new b.ObjectTracker("face");f.setInitialScale(4),f.setStepSize(2),f.setEdgesDensity(0.1);var g=document.getElementById("face"),h=g.getContext("2d"),i=a("#ratingNum");console.log(i);var j=0;f.on("track",function(b){h.clearRect(0,0,g.width,g.height),0===b.data.length?Date.now()-j>3e3&&!i.hasClass("freeze")&&(i.text("--"),d(0.5,!1)):(j=Date.now(),b.data.forEach(function(c){a.ajax({url:"http://52.14.139.51/rateme",type:"POST",data:JSON.stringify({pixels:Array.from(b.pixels),width:b.width,height:b.height}),contentType:"application/json",dataType:"json"}).done(function(a){console.log(a);var b=a.rating.toFixed(2);i.hasClass("freeze")||(i.text(b),d(a.rating,!0))}),h.strokeStyle="#FFDD1F",h.strokeRect(c.x,c.y,c.width,c.height),h.font="11px Helvetica",h.fillStyle="#fff"}))}),b.track("#myVideo",f,{camera:!0})}).call(b,c("7t+N"),c("KPBs"))}},["vGYV"]);
//# sourceMappingURL=main.78560800.js.map